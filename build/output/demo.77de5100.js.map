{"version":3,"sources":["../src/slow-numbers/slow-numbers.ts","index.ts"],"names":[],"mappings":"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","file":"demo.77de5100.js","sourceRoot":"..\\..\\demo","sourcesContent":["export interface SlowNumbersOptions {\r\n\tslowSpeed: number;\r\n\tformat: boolean;\r\n}\r\n\r\nfunction format(value: number) {\r\n\treturn value.toString().replace(/(\\d)(?=(\\d{3})+(\\D|$))/g, '$1 ');\r\n}\r\n\r\nexport class SlowNumbers {\r\n\tprivate readonly $element: HTMLElement;\r\n\tprivate timer: number;\r\n\tprivate stopped: boolean;\r\n\t\r\n\tconstructor(\r\n\t\tpublic selector: string,\r\n\t\tpublic currentValue: number = 0,\r\n\t\tpublic options: Partial<SlowNumbersOptions> = {}\r\n\t) {\r\n\t\tthis.$element = document.querySelector(selector);\r\n\t\tthis.updateElementValue();\r\n\t}\r\n\t\r\n\tpublic stopChange() {\r\n\t\tclearTimeout(this.timer);\r\n\t}\r\n\t\r\n\tpublic changeTo(endValue: number, options: Partial<SlowNumbersOptions> = {}) {\r\n\t\tthis.startChanging(endValue, options);\r\n\t}\r\n\t\r\n\tpublic add(value: number, options: Partial<SlowNumbersOptions> = {}) {\r\n\t\tthis.startChanging(this.currentValue + value, options);\r\n\t}\r\n\t\r\n\tpublic subtract(value: number, options: Partial<SlowNumbersOptions> = {}) {\r\n\t\tthis.startChanging(this.currentValue - value, options);\r\n\t}\r\n\t\r\n\tprivate startChanging(endValue, options: Partial<SlowNumbersOptions> = {}) {\r\n\t\tthis.options = {\r\n\t\t\t...this.options,\r\n\t\t\t...options\r\n\t\t};\r\n\t\t\r\n\t\tclearTimeout(this.timer);\r\n\t\t\r\n\t\tlet timeDelta = 0;\r\n\t\tlet timeOut = 0;\r\n\t\tconst slowSpeed = this.options.slowSpeed / 100 || 0.1;\r\n\t\t\r\n\t\tconst insertValue = () => {\r\n\t\t\tthis.updateElementValue();\r\n\t\t\t\r\n\t\t\tif (this.stopped) {\r\n\t\t\t\tclearTimeout(this.timer);\r\n\t\t\t\tthis.stopped = false;\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\tconst diff = Math.abs(endValue - this.currentValue);\r\n\t\t\t\tconst diffLength = diff.toString().length;\r\n\t\t\t\tlet step = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (diff !== 0) {\r\n\t\t\t\t\ttimeDelta = Math.floor((1000 / diff) - timeOut);\r\n\t\t\t\t\t\r\n\t\t\t\t\tswitch (diffLength) {\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tstep = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tstep = 11;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\tstep = 111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\t\tstep = 1111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\t\tstep = 11111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\t\tstep = 111111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\t\tstep = 1111111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\t\tstep = 11111111;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tstep = 111111111;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (endValue > this.currentValue) {\r\n\t\t\t\t\t\tthis.currentValue += step;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.currentValue -= step;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\ttimeOut += Math.floor(timeDelta * slowSpeed);\r\n\t\t\t\t\t\r\n\t\t\t\t\tinsertValue();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearTimeout(this.timer);\r\n\t\t\t\t}\r\n\t\t\t}, timeOut);\r\n\t\t};\r\n\t\t\r\n\t\tinsertValue();\r\n\t}\r\n\t\r\n\tprivate updateElementValue() {\r\n\t\tthis.$element.innerText = this.options.format ? format(this.currentValue) : this.currentValue.toString();\r\n\t}\r\n}\r\n","import { SlowNumbers } from '../src/slow-numbers/slow-numbers';\r\n\r\nwindow.onload = function () {\r\n\tconst exampleInput1: HTMLInputElement = document.querySelector('.js-example-1');\r\n\tconst exampleInput2: HTMLInputElement = document.querySelector('.js-example-2');\r\n\tconst exampleInput3: HTMLInputElement = document.querySelector('.js-example-3');\r\n\tconst speedSelect1: HTMLSelectElement = document.querySelector('.js-speed-1');\r\n\tconst speedSelect2: HTMLSelectElement = document.querySelector('.js-speed-2');\r\n\tconst speedSelect3: HTMLSelectElement = document.querySelector('.js-speed-3');\r\n\tconst stopExample1: HTMLElement = document.querySelector('.js-stop-1');\r\n\tconst stopExample2: HTMLElement = document.querySelector('.js-stop-2');\r\n\tconst startBtn1: HTMLElement = document.querySelector('.js-start-1');\r\n\tconst example1 = new SlowNumbers('.js-result-1', 5500, {\r\n\t\tformat: true,\r\n\t\tslowSpeed: Number(speedSelect1.value),\r\n\t});\r\n\tconst example2 = new SlowNumbers('.js-result-2', 0, {\r\n\t\tformat: true,\r\n\t\tslowSpeed: Number(speedSelect2.value),\r\n\t});\r\n\tconst example3 = new SlowNumbers('.js-result-3', 5500, {\r\n\t\tformat: true,\r\n\t\tslowSpeed: Number(speedSelect3.value),\r\n\t});\r\n\t\r\n\texampleInput1.onchange = (event) => {\r\n\t\texample1.changeTo(Number((event.target as HTMLInputElement).value), {\r\n\t\t\tslowSpeed: Number(speedSelect1.value),\r\n\t\t});\r\n\t};\r\n\t\r\n\texampleInput2.onkeyup = (event) => {\r\n\t\texample2.changeTo(Number((event.target as HTMLInputElement).value), {\r\n\t\t\tslowSpeed: Number(speedSelect2.value),\r\n\t\t});\r\n\t};\r\n\t\r\n\texampleInput3.onchange = (event) => {\r\n\t\tconsole.log((event.target as HTMLInputElement).value, (event.target as HTMLInputElement).checked);\r\n\t\tif ((event.target as HTMLInputElement).checked) {\r\n\t\t\texample3.add(Number((event.target as HTMLInputElement).value), {\r\n\t\t\t\tslowSpeed: Number(speedSelect3.value),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\texample3.subtract(Number((event.target as HTMLInputElement).value), {\r\n\t\t\t\tslowSpeed: Number(speedSelect3.value),\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\tstopExample1.onclick = () => {\r\n\t\texample1.stopChange();\r\n\t};\r\n\t\r\n\tstopExample2.onclick = () => {\r\n\t\texample2.stopChange();\r\n\t};\r\n\t\r\n\tstartBtn1.onclick = () => {\r\n\t\texample1.changeTo(Number(exampleInput1.value), {\r\n\t\t\tslowSpeed: Number(speedSelect1.value),\r\n\t\t});\r\n\t};\r\n}\r\n"]}